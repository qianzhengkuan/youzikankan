(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/package_user/editUserInfo"],{"5ae3":function(e,n,t){},"85d4":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){t.e("components/w-picker/w-picker").then(function(){return resolve(t("855a"))}.bind(null,t)).catch(t.oe)},s={components:{wPicker:i},data:function(){return{isEdit:!1,user:"",endYear:"",nowDate:"",defaultProps:{label:"name",value:"id"},sexArr:[{name:"男",id:1},{name:"女",id:2}],birthday:"2019-01-01",options:[],defaultRegion:"",addressRengin:""}},methods:{showErrorImage:function(e){this.user.image=this.$errorImage},clear:function(e){this.user.nickname=""},edit:function(){var e=this;this.$commonJs.chooseImage(1).then((function(n){e.$commonJs.urlTobase64(n[0]).then((function(n){e.user.image=n,e.$apiJs.upUserImage({user_image:n}).then((function(e){console.log(e)}))}))}))},showPicker:function(e){this.$refs[e].show()},onConfirm:function(e,n){switch(n){case"sex":this.user.sex=e.value;break;case"date":this.birthday=e.value,console.log(this.birthday);break;case"region":this.defaultRegion=e.value,this.addressRengin=e.result;break;default:break}},sexPicker:function(e){this.user.sex=e.detail.value},submitInfo:function(){var e=this;this.isEdit=!1;var n=this.user;this.$apiJs.upUser({username:n.nickname,sex:n.sex,birthday:this.birthday,signature:n.signature,address:JSON.stringify(this.defaultRegion),address_name:this.addressRengin}).then((function(n){e.$commonJs.uniMsg("修改成功");var t=e.$commonJs.getBeforePage();if("/pages/package_user/setting"==t.route){var i=e.$commonJs.getBeforePage(1);i.getUserInfo()}else t.getUserInfo()})).then((function(){e.$commonJs.navBack()}))},navTo:function(e){var n=this;this.$commonJs.isLogin().then((function(t){t&&n.$commonJs.navTo(e)}))},getUserInfo:function(){var n=this,t=this;this.$apiJs.getUser({}).then((function(i){i&&(console.log(i),e.setStorageSync("userInfo",i),t.$store.dispatch("setUserInfoObj",i),n.user=i,n.birthday=i.birthday,n.defaultRegion=i.address?JSON.parse(i.address):"",n.addressRengin=i.address_name)}))}},onLoad:function(){this.getUserInfo(),this.endYear=(new Date).getFullYear()-1}};n.default=s}).call(this,t("543d")["default"])},9074:function(e,n,t){"use strict";t.r(n);var i=t("c096"),s=t("d411");for(var o in s)"default"!==o&&function(e){t.d(n,e,(function(){return s[e]}))}(o);t("9914");var r,a=t("f0c5"),u=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);n["default"]=u.exports},9914:function(e,n,t){"use strict";var i=t("5ae3"),s=t.n(i);s.a},c096:function(e,n,t){"use strict";var i={"w-picker":function(){return t.e("components/w-picker/w-picker").then(t.bind(null,"855a"))}},s=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isEdit&&e.edit()},e.e1=function(n){e.isEdit&&e.showPicker("sex")},e.e2=function(n){e.isEdit&&e.showPicker("date")},e.e3=function(n){e.isEdit&&e.showPicker("region")},e.e4=function(n){e.isEdit?e.submitInfo():e.isEdit=!0})},o=[];t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i}))},d411:function(e,n,t){"use strict";t.r(n);var i=t("85d4"),s=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=s.a},fb33:function(e,n,t){"use strict";(function(e){t("c233"),t("921b");i(t("66fd"));var n=i(t("9074"));function i(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])}},[["fb33","common/runtime","common/vendor"]]]);