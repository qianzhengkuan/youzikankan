(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/package_other/search"],{"04b7":function(t,e,n){"use strict";(function(t){n("c233"),n("921b");a(n("66fd"));var e=a(n("16fa"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"16fa":function(t,e,n){"use strict";n.r(e);var a=n("8a10"),o=n("95b3");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("d881");var i,c=n("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"459c96d6",null,!1,a["a"],i);e["default"]=s.exports},6626:function(t,e,n){},"8a10":function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"95b3":function(t,e,n){"use strict";n.r(e);var a=n("e884"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},d881:function(t,e,n){"use strict";var a=n("6626"),o=n.n(a);o.a},e884:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("template/textNew").then(function(){return resolve(n("60f2"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("template/newsList").then(function(){return resolve(n("07e6"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("template/bigCover").then(function(){return resolve(n("66c4"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("template/three").then(function(){return resolve(n("90a2"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/mehaotian-search/mehaotian-search").then(function(){return resolve(n("1eb9"))}.bind(null,n)).catch(n.oe)},s={components:{mSearch:c,textNew:a,newList:o,bigCover:r,threeNew:i},data:function(){return{historyList:[],hotList:["福建","期"],screenHeight:0,isLoading:!1,bottomDistinct:0,pageObj:{page:1,pagecount:1},noMore:!1,searched:!1,noData:!1,searchData:[],placeholder:"动态占位内容"}},methods:{setInputVal:function(t){this.$refs.mSearch.setInput(t)},clearhistory:function(){this.historyList=[],t.setStorageSync("historyArr",[])},clear:function(){this.noData=!1,this.searched=!1,this.searchData=[],this.pageObj.page=1,this.pageObj.pagecount=1},keywordSearch:function(t){this.searchData=[],this.pageObj.page=1,this.pageObj.pagecount=1,this.$refs.mSearch.setInput(t),this.search(t,1)},getLocaStorage:function(){var e=t.getStorageSync("historyArr").length?JSON.parse(t.getStorageSync("historyArr")):[];this.historyList=e},setLocaStorage:function(e){var n=t.getStorageSync("historyArr").length?JSON.parse(t.getStorageSync("historyArr")):[];n.push(e);var a=n.filter((function(t,e,n){return n.indexOf(t)===e}));t.setStorageSync("historyArr",JSON.stringify(a))},search:function(t,e){var n=this,a=this;this.keyword=t,this.noData=!1,this.noMore=!1,this.setLocaStorage(t),this.$apiJs.getNewsSearch({page:this.pageObj.page,search:t}).then((function(t){if(n.searched=!0,t.backlist.length){var o=t.backlist,r=n.searchData;o.map((function(t){t.img.length&&t.img?t.cover=t.img[0].url:t.cover="no",t.time=a.$commonJs.timeFormat.noYearFormat(t.create_time)})),n.pageObj.page=Number(t.page),n.pageObj.pagecount=t.pagecount,Number(t.page)==t.pagecount&&(n.noMore=!0),n.searchData=e?o:r.concat(o),n.isLoading=!1}else n.searchData.length?n.noMore=!0:(n.pageObj.page=1,n.pageObj.pagecount=1,n.noData=!0)})).then((function(){n.getLocaStorage()}))},onPageScroll:function(e){var n=this,a=e.scrollTop;if(console.log(this.noMore),console.log(this.isLoading),!this.isLoading&&!this.noMore){var o=t.createSelectorQuery().in(this);o.select("#listArea").boundingClientRect((function(t){var e=t.height;n.bottomDistinct>=e-n.screenHeight-a&&(n.isLoading=!0,n.pageObj.page+=1,n.search(n.keyword))})).exec()}}},onLoad:function(){this.screenHeight=this.$YZKK.screenHeight,this.bottomDistinct=this.$YZKK.bottomDistinct,this.getLocaStorage()}};e.default=s}).call(this,n("543d")["default"])}},[["04b7","common/runtime","common/vendor"]]]);