(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/editUserInfo"],{"039b":function(e,n,t){"use strict";(function(e,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){t.e("components/w-picker/w-picker").then(function(){return resolve(t("f07b"))}.bind(null,t)).catch(t.oe)},r={components:{wPicker:s},data:function(){return{isEdit:!1,user:"",endYear:"",nowDate:"",defaultProps:{label:"name",value:"id"},sexArr:[{name:"男",id:1},{name:"女",id:2}],birthday:"2019-01-01",options:[],defaultRegion:"",addressRengin:""}},methods:{showErrorImage:function(e){this.user.image=this.$errorImage},clear:function(e){this.user.nickname=""},edit:function(){var n=this;this.$commonJs.chooseImage(1).then((function(t){n.$commonJs.urlTobase64(t[0]).then((function(t){n.user.image=t,n.$apiJs.upUserImage({user_image:n.user.image}).then((function(n){e("log",n," at pages\\my\\editUserInfo.vue:139")}))}))}))},showPicker:function(e){this.$refs[e].show()},onConfirm:function(n,t){switch(t){case"sex":this.user.sex=n.value;break;case"date":this.birthday=n.value,e("log",this.birthday," at pages\\my\\editUserInfo.vue:155");break;case"region":this.defaultRegion=n.value,this.addressRengin=n.result;break;default:break}},sexPicker:function(e){this.user.sex=e.detail.value},submitInfo:function(){var e=this;this.isEdit=!1;var n=this.user;this.$apiJs.upUser({username:n.nickname,sex:n.sex,birthday:this.birthday,signature:n.signature,address:JSON.stringify(this.defaultRegion),address_name:this.addressRengin}).then((function(n){e.$commonJs.uniMsg("修改成功");var t=e.$commonJs.getBeforePage();if("pages/my/setting"==t.route){var i=e.$commonJs.getBeforePage(1);i.getUserInfo()}else t.getUserInfo()})).then((function(){e.$commonJs.navBack()}))},navTo:function(e){var n=this;this.$commonJs.isLogin().then((function(t){t&&n.$commonJs.navTo(e)}))},getUserInfo:function(){var n=this,t=this;this.$apiJs.getUser({}).then((function(s){s&&(e("log",s," at pages\\my\\editUserInfo.vue:202"),i.setStorageSync("userInfo",s),t.$store.dispatch("setUserInfoObj",s),n.user=s,n.birthday=s.birthday,n.defaultRegion=s.address?JSON.parse(s.address):"",n.addressRengin=s.address_name)}))}},onLoad:function(){this.getUserInfo(),this.endYear=(new Date).getFullYear()-1}};n.default=r}).call(this,t("0de9")["default"],t("6e42")["default"])},"0d67":function(e,n,t){"use strict";t.r(n);var i=t("039b"),s=t.n(i);for(var r in i)"default"!==r&&function(e){t.d(n,e,(function(){return i[e]}))}(r);n["default"]=s.a},"1cd0":function(e,n,t){"use strict";t.r(n);var i=t("f698"),s=t("0d67");for(var r in s)"default"!==r&&function(e){t.d(n,e,(function(){return s[e]}))}(r);t("c87e");var a,o=t("f0c5"),u=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);n["default"]=u.exports},6150:function(e,n,t){},baa7:function(e,n,t){"use strict";(function(e){t("ff80"),t("921b");i(t("66fd"));var n=i(t("1cd0"));function i(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},c87e:function(e,n,t){"use strict";var i=t("6150"),s=t.n(i);s.a},f698:function(e,n,t){"use strict";var i={"w-picker":function(){return t.e("components/w-picker/w-picker").then(t.bind(null,"f07b"))}},s=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isEdit&&e.edit()},e.e1=function(n){e.isEdit&&e.showPicker("sex")},e.e2=function(n){e.isEdit&&e.showPicker("date")},e.e3=function(n){e.isEdit&&e.showPicker("region")},e.e4=function(n){e.isEdit?e.submitInfo():e.isEdit=!0})},r=[];t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return i}))}},[["baa7","common/runtime","common/vendor"]]]);