(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-package_new-addNew"],{"133a":function(t,a,e){"use strict";(function(t){e("4160"),e("a434"),e("a9e3"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={name:"uploadImg",props:{count:{value:0,type:Number},list:Array},data:function(){return{imageList:[],showChooseImage:!0}},created:function(){var a=this;uni.getStorage({key:"imgs",success:function(e){if(t.log(e),e.data){var i=JSON.parse(e.data);t.log(i),a.imageList=i,t.log(a.imageList),a.imageList.length>2&&(a.showChooseImage=!1)}}}),uni.removeStorage({key:"imgs"})},methods:{deleteImage:function(a){t.log(a),t.log(this.imageList),t.log(this.imageList.splice(a,1))},previewImage:function(t){this.$commonJs.previewImage(t,this.imageList)},chooseImg:function(){var a=this,e=this.count-this.imageList.length;e>=1&&this.$commonJs.chooseImage(e).then((function(e){e.forEach((function(e){a.$commonJs.urlTobase64(e).then((function(e){a.imageList.push(e),t.log(a.imageList),a.imageList.length>2&&(a.showChooseImage=!1),uni.setStorage({key:"imgs",data:JSON.stringify(a.imageList)})}))}))}))},returnImageList:function(){return this.imageList}}};a.default=i}).call(this,e("5a52")["default"])},"29ab":function(t,a,e){"use strict";e.r(a);var i=e("133a"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},3995:function(t,a,e){"use strict";e.r(a);var i=e("4244"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},4244:function(t,a,e){"use strict";(function(t){var i=e("ee27");e("4160"),e("d81d"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("6355")),o=(i(e("849e")),i(e("d7e0")),{components:{uploadImg:n.default},data:function(){return{showBack:!1,current:"",readOnly:!1,formats:{},formData:{title:"",content:"",imageList:[]},post_class_list:[],post_class_index:-1,pageObj:{page:0,pagecount:0},ShangHuiList:[],post_shanghui_index:-1,category_id:-1}},mounted:function(){this.getTypes(),this.getShangHuiList()},onLoad:function(){var a=this;uni.getStorage({key:"add-input",success:function(e){if(t.log(e),e.data){var i=JSON.parse(e.data);t.log(i),a.formData.title=i.title,a.formData.content=i.content,a.imageList=i.imageList,t.log(i.imageList),t.log(a.imageList)}}})},computed:{range:function(){return this.post_class_list.map((function(t){return t.nickname}))},post_class_name:function(){if(-1!==this.post_class_index)return this.post_class_list[this.post_class_index].nickname},shanghui:function(){return this.ShangHuiList.map((function(t){return t.name}))},post_shanghui_name:function(){if(-1!==this.post_shanghui_index)return this.ShangHuiList[this.post_shanghui_index].name}},methods:{navBack:function(){var t=this,a=this;if((""!=a.formData.title||""!=a.formData.content||a.formData.imageList.length>0)&&!a.showBack)return uni.showModal({content:"是否要保存为草稿？",showCancel:!0,cancelText:"不保存",confirmText:"保存",success:function(a){a.confirm?t.store():(uni.removeStorage({key:"add-input"}),uni.removeStorage({key:"imgs"})),uni.navigateBack({delta:1})}}),a.showBack=!0,!0;this.goBack()},goBack:function(){uni.navigateBack({delta:1})},store:function(){var t=this,a={title:t.formData.title,content:t.formData.content,imageList:t.$refs.uploadImg.returnImageList()};uni.setStorage({key:"add-input",data:JSON.stringify(a)})},getTypes:function(){var t=this;this.$apiJs.getNewsCategory().then((function(a){t.post_class_list=a}))},choosePostClass:function(t){var a=this;this.post_class_list.forEach((function(e,i){i==t.detail.value&&(a.category_id=e.id)})),this.post_class_index=t.detail.value},getShangHuiList:function(){var t=this;this.$apiJs.getChamberList({page:this.pageObj.page+1}).then((function(a){t.ShangHuiList=a.backlist}))},chooseShangHui:function(t){this.post_shanghui_index=t.detail.value},submitForm:function(){var a=this;t.log("ddddd");var e=this,i=e.$refs.uploadImg.returnImageList(),n=1;t.log(e.$refs.uploadImg.returnImageList()),t.log(i),""==i?(t.log("123"),e.$apiJs.setNewsPublish({title:e.formData.title,category_id:this.category_id,type:1,images:"",equipment:n,content:e.formData.content}).then((function(a){t.log(a)}))):e.$apiJs.setNewsPublishImage({image1:i[0],image2:i[1],image3:i[2]}).then((function(i){t.log(i.images),e.formData.imageList=i.images,t.log(e.formData.imageList),e.$apiJs.setNewsPublish({title:e.formData.title,category_id:a.category_id,type:2,equipment:n,images:e.formData.imageList,content:e.formData.content}).then((function(a){t.log(a),e.showBack=!0,uni.removeStorage({key:"add-input"}),uni.removeStorage({key:"imgs"})}))})),e.$commonJs.uniMsg("发布成功","success"),setTimeout((function(){uni.navigateBack({delta:1})}),1e3)}}});a.default=o}).call(this,e("5a52")["default"])},"49b3":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABj0lEQVRoQ+2Z666EMAiE7UPqQ64P6UoiiTHbMoVhvUT/nlrmY+CUrWW4+VNurn94Ac528HXgFg4syzKuQsdSyvQPwWu8zxpnXuPNVjyzhDbxsqE8smkqxCZeEibPZEE0AQ7iNRlpEAfxGq8JUQWoiE+DqIg3IVoAUjZq5a9SpDlhiG+WrlVC6RAR8UKGNHEaRFQ8BCCLGIGONcja03RAA7MCshMCA7ACMxMBl9De/oiAyLu1E7nLgUg5ZYh3OeCByBIfAkB7YgNOOxBdJdTZE7XybZ6wrZf2fwsDgE6kjSIUAAcEbY6iAXRA0MSHm9gxHlDqnt4DHdnX2DQXKCUE/J+/bhM7xdOcCDkAiNdbhesdZIh4vcHoWYseYLrO5YBHkOcdBKYbICIk8i5lnGYIYOzhOgeYgZl7QSXEDOj5PdHqBRMgQzwT4rkXW5mZdwyB1dnpuZe724QpI4B+G6DNL7WmpF6v7xptD0Ebg0GI2AeOA8Q9PzEh88iZa8xz4ExxSOwXAMlS5prXgczsInt/AZoBNkD0SUBfAAAAAElFTkSuQmCC"},5667:function(t,a,e){"use strict";var i=e("61f8"),n=e.n(i);n.a},"579f":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAA9klEQVRYhe3YIU7FQBSF4a9QMAQEEocBjUHhUd0CC0CxBDwkCIKAsIsawhLImzXAChAICAYQb54ZAenMJCQv85tjek9+0fTetAshKGQXA+7xPnV4HEfQl1rgHCdYx2VuyUoFkS7mdklJDZHPmB//LVKFJpLSRFKaSEoTSVkqkbeYryUli+17aL49c9iLeYCjqcPDMHxj1oUQTnGTKVGLux4zPGIts2QfO3jGS8b8Fx56POE4UwKucBbzeurw4kKr8bJuxNwqKal5oRV1LdV3pApNJKWJpDSRlCaSUkNkNWbu9q4mshmz+/WpP6jxf+TC/Ba5LSn5AWIqIGLkakqFAAAAAElFTkSuQmCC"},"59f9":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAB2UlEQVR4Xu3bQU4CQRQEULiLbvQkLl3oITiFXkf33sENSxbGxAWHMO78YzLJBNE0XaR/1U9N8hMCXYR+1Kwa1itfkMAaSju8MiBYAgMaEBQA426gAUEBMO4GGhAUAONuoAFBATDuBhrwl8BFPLOP+QJtmuLVGvgUu76L2cZsYl6bFIBFlQBnvJnjMR48ADZN0SqAh3jT5i9j3psUgEUVAI/h3YfJM+DSHFUHTMWblJUB0/GUASnwVAFp8BQBqfDUAOnwlAAp8VQAafEUAKnx2AHp8ZgBJfBYAWXwGAGl8NgA5fCYACXxWABl8RgApfGyAeXxMgFL4GUBlsHLACyFNxqwHN5IwOnXAhPg8hp29Nh8RtmxcNSp3E18thcDdnxDi4hvYczvJ10OcdQtvLQvhZgBWKqJWYBlEDMBSyBmA8ojMgBKI7IAyiIyAUoisgHKITICSiGyAsogMgNKILID0iMqAFIjqgDSIioBUiKqAdIhKgJSIaoC0iAqA1IgqgOmI1YA/AvxOl7YneEk8d+3qAJ4DNF/+e9oz3xk+hbZWzewQzAiVzEfMZ998dNSlW7h03Z+ptUGBCENaEBQAIy7gQYEBcC4G2hAUACMu4EGBAXAuBtoQFAAjH8D85pyUQhyMe0AAAAASUVORK5CYII="},"5d6e":function(t,a,e){"use strict";var i,n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"status bg-white"}),i("v-uni-view",{staticClass:"close-top",staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[i("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:e("59f9"),mode:""},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navBack()}}}),i("v-uni-text",{staticStyle:{display:"flex",flex:"1","justify-content":"center","font-size":"36rpx"}},[t._v("发布文章")])],1),i("v-uni-view",{staticClass:"new-add-wrap"},[i("v-uni-view",{staticClass:"title bd-bottom"},[i("v-uni-input",{attrs:{type:"text",placeholder:"文章..."},model:{value:t.formData.title,callback:function(a){t.$set(t.formData,"title",a)},expression:"formData.title"}})],1),i("v-uni-view",{staticClass:"content",staticStyle:{"margin-bottom":"50rpx"}},[i("v-uni-textarea",{attrs:{placeholder:"说点什么...",maxlength:"10000"},model:{value:t.formData.content,callback:function(a){t.$set(t.formData,"content",a)},expression:"formData.content"}})],1),i("uploadImg",{ref:"uploadImg",attrs:{count:3}}),i("v-uni-picker",{attrs:{mode:"selector",range:t.range},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.choosePostClass.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"joinTalk flex-box flex-y-center jiantouRight lineJianTou bd-bottom",attrs:{"hover-class":"yzkk-href-hover"}},[i("v-uni-image",{attrs:{src:e("d615"),mode:""}}),i("v-uni-text",{staticClass:"label"},[t._v(t._s(t.post_class_name?"所属分类："+t.post_class_name:"请选择文章分类"))])],1)],1)],1),i("v-uni-view",{staticClass:"new-bottom flex-bottom-content flex-1 flex-box flex-x-center"},[i("v-uni-view",{staticClass:"flex-box"},[i("v-uni-button",{staticClass:"yzkk-submitBtn addNewBtn",attrs:{disabled:!t.formData.title||!t.formData.content||!t.post_class_name,"hover-class":"yzkk-btn-hover"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submitForm.apply(void 0,arguments)}}},[t._v("发布文章")])],1)],1)],1)},o=[];e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}))},"61f8":function(t,a,e){var i=e("b23e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("68a8af8b",i,!0,{sourceMap:!1,shadowMode:!1})},6355:function(t,a,e){"use strict";e.r(a);var i=e("95d9"),n=e("29ab");for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("f057");var s,r=e("f0c5"),d=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"c4487110",null,!1,i["a"],s);a["default"]=d.exports},"6acb":function(t,a,e){var i=e("8f35");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("25ef1888",i,!0,{sourceMap:!1,shadowMode:!1})},"8f35":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */.img-list[data-v-c4487110]{padding:0 %?30?%;box-sizing:border-box}.img-list .uploadItem[data-v-c4487110],\r\n.img-list .imgItem[data-v-c4487110]{width:%?162?%;height:%?162?%;border-radius:%?14?%;margin:%?12?%;border:1px solid #f1f1f1}.img-list .uploadItem[data-v-c4487110]{border:1px solid #f1f1f1}.img-list .uploadItem uni-image[data-v-c4487110]{width:%?34?%;height:%?34?%;border:0}.img-list .imgItem[data-v-c4487110]{position:relative}.img-list .imgItem uni-image[data-v-c4487110]{border:0;width:%?162?%;height:%?162?%}.img-list .imgItem .delete[data-v-c4487110]{position:absolute;right:%?-10?%;top:%?-10?%;width:%?30?%;height:%?30?%;border:0;margin:0;z-index:9;padding:%?6?%;background-color:#e56361;border-radius:50%;box-sizing:border-box}',""]),t.exports=a},"95d9":function(t,a,e){"use strict";var i,n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"img-list flex-box flex-wrapLine bd-bottom",staticStyle:{"padding-bottom":"60rpx"}},[t._l(t.imageList,(function(a,n){return[i("v-uni-view",{key:n+"_0",staticClass:"imgItem flex-box flex-xy-center"},[i("v-uni-image",{staticClass:"delete",attrs:{src:e("49b3"),mode:""},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.deleteImage(n)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:a,"data-src":a},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImage.apply(void 0,arguments)}}})],1)]})),t.showChooseImage?i("v-uni-view",{staticClass:"uploadItem flex-box flex-xy-center",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseImg.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:e("579f"),mode:""}})],1):t._e()],2)},o=[];e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}))},b23e:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */uni-page-body[data-v-a11e0f7c],\r\n.container[data-v-a11e0f7c]{display:-webkit-box;display:-webkit-flex;display:flex;height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.close-top[data-v-a11e0f7c]{padding:%?36?% 0 0 %?0?%;box-sizing:border-box}.close-top uni-image[data-v-a11e0f7c]{width:%?29?%;height:%?29?%}.pad-left-right-30[data-v-a11e0f7c], .new-add-wrap .img-list[data-v-a11e0f7c], .new-add-wrap .title[data-v-a11e0f7c], .new-add-wrap .content[data-v-a11e0f7c], .new-add-wrap .joinTalk[data-v-a11e0f7c], .new-add-wrap .address[data-v-a11e0f7c]{padding:0 %?30?%;box-sizing:border-box}.new-add-wrap[data-v-a11e0f7c]{padding:%?30?% 0}.new-add-wrap .img-list .uploadItem[data-v-a11e0f7c],\r\n.new-add-wrap .img-list .imgItem[data-v-a11e0f7c]{width:%?200?%;height:%?200?%;border-radius:%?14?%;margin:%?12?%;border:1px solid #f1f1f1}.new-add-wrap .img-list .uploadItem[data-v-a11e0f7c]{border:1px solid #f1f1f1}.new-add-wrap .img-list .uploadItem uni-image[data-v-a11e0f7c]{width:%?34?%;height:%?34?%;border:0}.new-add-wrap .img-list .imgItem[data-v-a11e0f7c]{position:relative}.new-add-wrap .img-list .imgItem uni-image[data-v-a11e0f7c]{border:0;width:%?162?%;height:%?162?%}.new-add-wrap .img-list .imgItem .delete[data-v-a11e0f7c]{position:absolute;right:%?-10?%;top:%?-10?%;width:%?30?%;height:%?30?%;border:0;margin:0;z-index:9;padding:%?6?%;background-color:#e56361;border-radius:50%;box-sizing:border-box}.new-add-wrap .title uni-input[data-v-a11e0f7c]{font-size:%?28?%;padding:%?22?% 0}.new-add-wrap .content uni-textarea[data-v-a11e0f7c]{width:100%;padding:%?22?% 0;font-size:%?28?%}.new-add-wrap .joinTalk[data-v-a11e0f7c],\r\n.new-add-wrap .address[data-v-a11e0f7c]{height:%?107?%;line-height:%?107?%;padding-right:%?10?%}.new-add-wrap .joinTalk[data-v-a11e0f7c]::after,\r\n.new-add-wrap .address[data-v-a11e0f7c]::after{right:%?30?%}.new-add-wrap .joinTalk .label[data-v-a11e0f7c],\r\n.new-add-wrap .address .label[data-v-a11e0f7c]{font-size:%?25.5?%;color:#828282}.new-add-wrap .joinTalk .txt[data-v-a11e0f7c],\r\n.new-add-wrap .address .txt[data-v-a11e0f7c]{font-size:%?25.5?%;color:#a2a2a2}.new-add-wrap .joinTalk uni-image[data-v-a11e0f7c],\r\n.new-add-wrap .address uni-image[data-v-a11e0f7c]{width:%?36?%;height:%?36?%;margin-right:%?6?%}.new-add-wrap .address uni-image[data-v-a11e0f7c]{width:%?26?%;height:%?31?%;margin-right:%?20?%}.new-bottom .n-b-item[data-v-a11e0f7c]{margin-right:%?20?%}.new-bottom .n-b-item uni-image[data-v-a11e0f7c]{width:%?56?%;height:%?56?%;border-radius:50%;background-color:#f6f6f6;padding:%?15?%;box-sizing:border-box;margin-bottom:%?8?%}.new-bottom .n-b-item uni-text[data-v-a11e0f7c]{font-size:%?20?%;color:#a2a2a2}.new-bottom .addNewBtn[data-v-a11e0f7c]{border-radius:%?40?%;margin:%?30?% 0 %?30?% %?10?%}.chooseR .form-radio[data-v-a11e0f7c]{-webkit-transform:scale(.7);transform:scale(.7)}',""]),t.exports=a},d615:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAC+0lEQVRIia2WTWsTURSGn0lm7G3Gm8aSRdudGI2F6aKUCn7iSkERXLlV8E/YX6B/olBw686PIC6VVNTSTQslJrtuGghpm3TRJHPHxczEJHNnklpfCEzmPee8994595xjlMtlxsAA7gKPgdtAAbgUcE2gCpSBD8BXwEsMliCYAl4Aa4HIJKgCr4ENQMUF1eEy8B1YP4MYge164Ht5UsH7wA9g9QxCo1gNYtwbJ/gA+AzkzyEWIg98AR7GCRaBd8CF/yAW4kIQszgqmAbeAjLJWwiB4zhYlhXhLMvCcRwymcwodTGInR4UfM4E3yyfzyOlpNfrRbhcLoeUkm63q3Ndxc94Uvj3bG2cGEA2m+X09BTPi161mZkZlFJxggCvACOFn0kTpb5t2zQaDS0npaTZbCa5F4B7JvBIxxaLRaSU/d24rotpmiwsLJDPDyexUgohBEIIVlZWUEqxvb2tC/vIBG7pmJOTE5RSfcGpqSmmp6ep1+sYhjFka1kWQggajQZKKZTSFhmAmyZwVcfs7+8P/Z+dnSWbzVKr1SK2tm2Ty+WoVCpxQiGupfhbiBMxNzdHp9PRcvPz80m7GsSluFoagW3bHB0daTkpJe12e6I4KfwWkwjDMDBNk1arpeWFELGLGUEzBfweZyWEAODg4CDCpdNpAOr1+iSCFRPYBO6MMoVCAdu28Tyvn5VLS0uRDA2xuLjYz2ilFDs7OzqzzRTwUcf0ej1c18V1XTKZTP959BfWzm63i+u6KKVwXTduh5+McrlsABUSqs3y8jKtVotqtRrhHMfB8zx2d3fj3ENUgWIKfwZ5E2eVTqcRQsQmjJSS4+PjcWIEGiq8FhvAL51VeJy6LBRCoJTi8PBwnNhWoDE0RF0HfuL3r/+JNn572oPhjr8HPAP05eTf0Ali7oUvRitNCXgarOq8aAexSoMvdaWthH8EW+cQ2wpilEaJuFq6B9wAXgLR9hCPWuBzg4FjHETS5D24qDvAE/zeeYXhUb+GP+q/B74RM3GH+AOrvP4gxJLRHQAAAABJRU5ErkJggg=="},ef93:function(t,a,e){"use strict";e.r(a);var i=e("5d6e"),n=e("3995");for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("5667");var s,r=e("f0c5"),d=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"a11e0f7c",null,!1,i["a"],s);a["default"]=d.exports},f057:function(t,a,e){"use strict";var i=e("6acb"),n=e.n(i);n.a}}]);