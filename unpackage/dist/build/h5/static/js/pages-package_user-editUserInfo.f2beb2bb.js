(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-package_user-editUserInfo"],{"15f0":function(e,t,i){var a=i("f294");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("8001ba30",a,!0,{sourceMap:!1,shadowMode:!1})},"3bc8":function(e,t,i){"use strict";i.r(t);var a=i("5751"),n=i("4cd9");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("dc5b");var r,o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"38ebfa21",null,!1,a["a"],r);t["default"]=u.exports},"4cd9":function(e,t,i){"use strict";i.r(t);var a=i("a65a"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},5751:function(e,t,i){"use strict";var a={wPicker:i("dc4a").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"flex-box head-item bd-bottom  flex-y-center lineJianTou",class:{"jiantouRight padRight":e.isEdit},attrs:{"hover-class":"yzkk-href-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isEdit&&e.edit()}}},[i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-text",{staticClass:"label"},[e._v("头像")])],1),i("v-uni-view",[i("v-uni-image",{attrs:{src:e.user.image,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.showErrorImage.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"flex-box set-item bd-bottom ",class:{"lineJianTou inputRight":e.isEdit}},[i("v-uni-view",[i("v-uni-text",{staticClass:"label"},[e._v("用户名")])],1),i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-input",{class:{inputRight:e.isEdit},attrs:{type:"text",disabled:!e.isEdit},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),e.isEdit?i("v-uni-text",{staticClass:"uni-icon flex-box flex-y-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clear()}}},[e._v("")]):e._e()],1),i("v-uni-view",{staticClass:"flex-box set-item bd-bottom  lineJianTou ",class:{"jiantouRight padRight":e.isEdit},attrs:{"hover-class":"yzkk-href-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isEdit&&e.showPicker("sex")}}},[i("v-uni-view",[i("v-uni-text",{staticClass:"label"},[e._v("性别")])],1),i("v-uni-view",{staticClass:"flex-1 txt-right"},[i("v-uni-text",{class:{"black-text":e.user.sex}},[e._v(e._s(e.user.sex?e.sexArr[e.user.sex-1].name:"待完善"))])],1)],1),i("v-uni-view",{staticClass:"flex-box area-item  bd-bottom  flex-column uni-common-mb"},[i("v-uni-view",[i("v-uni-text",{staticClass:"label"},[e._v("个人介绍")])],1),i("v-uni-textarea",{attrs:{placeholder:"介绍一下你自己~",disabled:!e.isEdit},model:{value:e.user.signature,callback:function(t){e.$set(e.user,"signature",t)},expression:"user.signature"}})],1),i("v-uni-view",{staticClass:"flex-box set-item bd-bottom  lineJianTou",class:{"jiantouRight padRight":e.isEdit},attrs:{"hover-class":"yzkk-href-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isEdit&&e.showPicker("date")}}},[i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-text",{staticClass:"label"},[e._v("生日")])],1),i("v-uni-view",[i("v-uni-text",{class:{"black-text":e.birthday}},[e._v(e._s(e.birthday?e.birthday:"待完善"))])],1)],1),i("v-uni-view",{staticClass:"flex-box set-item bd-bottom  lineJianTou",class:{"jiantouRight padRight":e.isEdit},attrs:{"hover-class":"yzkk-href-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isEdit&&e.showPicker("region")}}},[i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-text",{staticClass:"label"},[e._v("地区")])],1),i("v-uni-view",[i("v-uni-text",{class:{"black-text":e.addressRengin}},[e._v(e._s(e.addressRengin?e.addressRengin:"待完善"))])],1)],1),i("w-picker",{ref:"sex",attrs:{mode:"selector",value:e.user.sex?e.sexArr[e.user.sex-1].name:"待完善","default-type":"name","default-props":e.defaultProps,options:e.sexArr},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm(t,"sex")}}}),i("w-picker",{ref:"date",attrs:{mode:"date",startYear:"1900",endYear:e.endYear,value:e.birthday,fields:"day","disabled-after":!1},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm(t,"date")}}}),i("w-picker",{ref:"region",attrs:{mode:"region",value:e.defaultRegion,"default-type":"value","hide-area":!1},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm(t,"region")}}}),i("v-uni-view",{staticClass:"yzkk-submitBtn",attrs:{"hover-class":"yzkk-btn-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isEdit?e.submitInfo():e.isEdit=!0}}},[e._v(e._s(e.isEdit?"完成":"编辑资料"))])],1)},s=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}))},a65a:function(e,t,i){"use strict";(function(e){var a=i("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("dc4a")),s={components:{wPicker:n.default},data:function(){return{isEdit:!1,user:"",endYear:"",nowDate:"",defaultProps:{label:"name",value:"id"},sexArr:[{name:"男",id:1},{name:"女",id:2}],birthday:"2019-01-01",options:[],defaultRegion:"",addressRengin:""}},methods:{showErrorImage:function(e){this.user.image=this.$errorImage},clear:function(e){this.user.nickname=""},edit:function(){var t=this;this.$commonJs.chooseImage(1).then((function(i){t.$commonJs.urlTobase64(i[0]).then((function(i){t.user.image=i,t.$apiJs.upUserImage({user_image:i}).then((function(t){e.log(t)}))}))}))},showPicker:function(e){this.$refs[e].show()},onConfirm:function(t,i){switch(i){case"sex":this.user.sex=t.value;break;case"date":this.birthday=t.value,e.log(this.birthday);break;case"region":this.defaultRegion=t.value,this.addressRengin=t.result;break;default:break}},sexPicker:function(e){this.user.sex=e.detail.value},submitInfo:function(){var e=this;this.isEdit=!1;var t=this.user;this.$apiJs.upUser({username:t.nickname,sex:t.sex,birthday:this.birthday,signature:t.signature,address:JSON.stringify(this.defaultRegion),address_name:this.addressRengin}).then((function(t){e.$commonJs.uniMsg("修改成功");var i=e.$commonJs.getBeforePage();if("/pages/package_user/setting"==i.route){var a=e.$commonJs.getBeforePage(1);a.getUserInfo()}else i.getUserInfo()})).then((function(){e.$commonJs.navBack()}))},navTo:function(e){var t=this;this.$commonJs.isLogin().then((function(i){i&&t.$commonJs.navTo(e)}))},getUserInfo:function(){var t=this,i=this;this.$apiJs.getUser({}).then((function(a){a&&(e.log(a),uni.setStorageSync("userInfo",a),i.$store.dispatch("setUserInfoObj",a),t.user=a,t.birthday=a.birthday,t.defaultRegion=a.address?JSON.parse(a.address):"",t.addressRengin=a.address_name)}))}},onLoad:function(){this.getUserInfo(),this.endYear=(new Date).getFullYear()-1}};t.default=s}).call(this,i("5a52")["default"])},dc5b:function(e,t,i){"use strict";var a=i("15f0"),n=i.n(a);n.a},f294:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */uni-page-body[data-v-38ebfa21], .container[data-v-38ebfa21]{background-color:#f3f3f5}.container[data-v-38ebfa21]{height:100%}.area-item[data-v-38ebfa21]{background-color:#fff;padding:0 %?30?%}.area-item .label[data-v-38ebfa21]{color:#000;font-size:%?30?%;height:%?98?%;line-height:%?98?%}.area-item uni-textarea[data-v-38ebfa21]{font-size:%?30?%;width:100%;height:%?200?%;padding-bottom:%?30?%}.head-item[data-v-38ebfa21]{background-color:#fff;padding:%?20?% %?30?%}.head-item .label[data-v-38ebfa21]{color:#000;font-size:%?30?%}.head-item uni-image[data-v-38ebfa21]{width:%?100?%;height:%?100?%;border-radius:50%;border:1px solid #f1f1f1}.set-item[data-v-38ebfa21]{background-color:#fff;padding:0 %?30?%;height:%?98?%;line-height:%?98?%;box-sizing:border-box}.set-item uni-text[data-v-38ebfa21]{font-size:%?30?%;color:#a7a7a7}.set-item uni-text.black-text[data-v-38ebfa21]{color:#000}.set-item .label[data-v-38ebfa21]{color:#000}.set-item uni-input[data-v-38ebfa21]{font-size:%?30?%;line-height:%?98?%;height:%?98?%;text-align:right}.set-item .txt-right[data-v-38ebfa21]{text-align:right}.set-item .inputRight[data-v-38ebfa21]{padding-right:%?15?%}.lineJianTou[data-v-38ebfa21]:after{right:%?45?%}.padRight[data-v-38ebfa21]{padding-right:%?60?%}.yzkk-submitBtn[data-v-38ebfa21]{margin-bottom:%?30?%}body.?%PAGE?%[data-v-38ebfa21]{background-color:#f3f3f5}',""]),e.exports=t}}]);